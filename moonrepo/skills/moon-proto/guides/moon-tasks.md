# Moon Tasks and Project Configuration

Tasks in Moonrepo are defined in `moon.yml` files located within project directories.

## moon.yml structure

Each project has its own `moon.yml` to define properties and tasks.

```yaml
type: 'library' # or 'application', 'tool'
language: 'typescript'

tasks:
  build:
    command: 'tsc'
    inputs:
      - 'src/**/*'
      - 'tsconfig.json'
    outputs:
      - 'dist'

  test:
    command: 'vitest run'
    inputs:
      - 'src/**/*'
      - 'tests/**/*'
    deps:
      - '~:build'
```

## Running Tasks

- `moon run <project>:<task>`: Run a specific task for a specific project.
- `moon run :test`: Run the `test` task for all projects that define it.
- `moon run <project>:<task> --affected`: Run a task only if the project or its dependencies have changed.

## Key Concepts

- **Inputs**: Files or globs that trigger a re-run if changed.
- **Outputs**: Files or directories generated by the task (cached by Moon).
- **Dependencies (`deps`)**: Tasks that must be run before the current task. Use `~` for the current project.
- **Caching**: Moon caches task results based on inputs. Subsequent runs with the same inputs will be instant.

## Task Runner Features

- **Parallelism**: Runs independent tasks in parallel.
- **Smart Hashing**: Uses content-aware hashing for accurate cache invalidation.
- **Token System**: Use variables like `$projectRoot`, `$target`, `$workspaceRoot` in commands.
